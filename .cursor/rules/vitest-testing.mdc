---
description: Vitest testing-hygiene rules
globs: ["**/*.{test,spec}.{js,ts,tsx}"]
alwaysApply: true
---

### instructions
* ALWAYS mock externals with `vi.mock` â€“ never mutate globals.
* Keep per-test timeouts < 50 ms; replace `setTimeout` with `screen.findBy*` / `waitFor`.
* Render fresh components and call `cleanup()` in `afterEach`.
* One logical assertion per test.
